I"¨√<p>About nine months ago, when I was still working at Microsoft as an electrical engineer on the Surface team, my manager asked me to write a specification for the project I was working on.</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image001.jpg" alt="My teacher." class="img-responsive" width="70%" /></p>

<p style="text-align: center;"><em>Figure 1: My teacher. Photo by <a href="https://en.wikipedia.org/wiki/IBM_Personal_Computer#/media/File:Ibm_pc_5150.jpg">Ruben de Rijcke</a></em></p>

<p><br /></p>

<p>I was surprised by her request since most specifications (known also as ‚Äúspecs‚Äù) were written by engineers with much more seniority than me. The systems engineer responsible for my project had just quit, and because I was my team‚Äôs expert on my project, my manager was asking me to fill in for the departed systems engineer. I accepted, without fully understanding what I was getting myself into.</p>

<p>The more I thought about my new assignment, the more I started to worry. My project was a brand-new subsystem for our product, increasing the stakes on me. I kept starting at my office‚Äôs ceiling, and wondering: How does one write a specification? What exactly is the difference between a good specification, and a bad one? Writing specifications is a pretty important task, so why did I not learn anything about that in school? Did I miss a class?</p>

<p>This was not the first time I was looking back on college and doubting myself. Every time I had to learn on the job, I kept asking myself: ‚ÄúWhy don‚Äôt I know this already? Did I miss something at Stanford?‚Äù. I had gone to a good school, and studied under professors who could charge hundreds of dollars an hour consulting in the industry, so how come I did not know how to do so many of the seemingly basic tasks a junior engineer was expected to do? So, it went on and on:</p>

<p class="center">EMI testing ‚Äì why don‚Äôt I know this already?</p>

<p class="center">PCB manufacturing ‚Äì why don‚Äôt I know this already?</p>

<p class="center">Flexible circuit boards ‚Äì why don‚Äôt I know this already?</p>

<p>A week after I had received my new assignment, it became clear to me that learning how to write a specification was going to be my hardest learn-on-the-job experience yet. Why? Because I was actually having an unlearn-on-the-job experience.</p>

<p>Back during school, and when I first started working, I used to think that writing specs was a useless exercise. What even was the point? Just design your system in your head, talk it through with others if you need to, and go build it. How could you even know all about your system before you start building it anyway? Any spec you could write would just be incomplete and not good. Writing specs was an unnecessary, bureaucratic task best to be avoided. Time spent on doing ‚Äúpaperwork‚Äù would be better used by actually building your product.</p>

<p>The sentiment above is still common in the technology industry, which I think is a shame. After three years in the industry, I have changed my mind, and now believe that a having good specs is critical for making your project a success.</p>

<h2 id="what-even-is-a-good-specification-or-the-huaqiangbei-test">What even is a good specification, or the Huaqiangbei test</h2>

<p>I thought hard about what actually made me change my mind about specs, and I can boil it down to the following:</p>

<ol>
  <li>
    <p><strong>You don‚Äôt have to know all about how your system is going to work to start writing a specification for it.</strong> There is a big spectrum between ‚Äúlet‚Äôs not even bother writing a spec‚Äù (what a typical new grad does) versus ‚ÄúLet‚Äôs spend a year writing a spec‚Äù (what NASA does). Many engineers believe that they are supposed to write a spec once at the beginning of the project, which nails the requirements and from then is set in stone. That is not true. At the start of your project, you should write the most detailed spec that is possible with the knowledge you have. After that, you can, and should, change your spec as you learn more about your system and your requirements throughout the course of building your project.</p>
  </li>
  <li>
    <p><strong>A spec always exists, whether you write it or not.</strong> When you start working on a project, you will have a conception in your mind about what your project is supposed to accomplish. This is a mental spec. The very act of writing that concept into a written specification will help you clarify your thoughts and catch any conceptual mistakes in your design early on.</p>
  </li>
  <li>
    <p><strong>Experience.</strong> Based on my experience, and the stories I heard from more senior engineers about how their projects suffered from having no clear specifications, I came to believe that having any spec written is always better than having no written specifications.</p>
  </li>
</ol>

<p>So, what constitutes a ‚Äúgood‚Äù spec? I came up with something I call the Huaqiangbei Test to explore this question. It is my goal with this article to help your electrical engineering specs pass the Huaqianbei Test.</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image002.jpg" alt="Huaqiangbei." class="img-responsive" width="75%" /></p>

<p style="text-align: center;"><em>Figure 2: the Huaqiangbei in Shenzen, China. Photo by <a href="https://medium.com/chinafacture/huaqiangbei-the-biggest-electronics-market-in-the-world-shenzhen-china-3ec66e5d2df0">Tocha</a></em></p>

<p><br /></p>

<p>The Huaqiangbei is an electronics market in Shenzen with a worldwide fame among electronics enthusiasts as a Grand Bazaar of Electronics. Now, I am Turkish, so this metaphor is all I need to understand the concept of Huaqiangbei, but for the non-Turks out there:</p>

<blockquote>
  <p>Huaqiangbei is a bustling downtown bazaar: crowded streets, neon lights, sidewalk vendors, and chain smokers [‚Ä¶] Drones whir, high-end gaming consoles flash, and customers inspect cases of chips. Someone bumbles by on a Hoverboard. A couple shops over, a cluster of kiosks hock knockoff smartphones at a deep discount. One saleswoman tries to sell me on an iPhone 6 that‚Äôs running Google‚Äôs Android operating system. Another pitches a shiny Huawei phone for about twenty dollars. [6]</p>
</blockquote>

<p>In Huaqianbei, you can find pretty much any electronic product that you want. The place is full of skilled vendors and mom-and-pop engineering shops.</p>

<p>Imagine now that your specification gets magically air-dropped into the Huaqiangbei. Only your spec - not your product. If a month later, successful clones of your product emerge in the Huaqiangbei, then you have succeeded in writing a good spec. Think about it:</p>

<ul>
  <li>
    <p>The place is full of skilled engineers and craftsmen. People skilled in the art of electronics, so if they cannot re-create your product based on your spec, it is on you.</p>
  </li>
  <li>
    <p>If the Huaqianbei folk were able to re-create your product without input from the designers, or without having to resort to reverse engineering an existing product, you have succeeded in writing a specification that stands on its own.</p>
  </li>
  <li>
    <p>The Huaquanbei engineer‚Äôs native language is not English. So, you need to really make sure that your spec is clear by avoiding convoluted language, in addition to relying on well-made diagrams and tables. (This imaginary test notwithstanding, modern technology teams have many immigrant members, who may not be as comfortable in English, so this point is actually really, really important).</p>
  </li>
</ul>

<p>The rest of this article is what I wish I had known about writing specifications when I graduated from school. We are going to talk about how I learned to write specs, and how I can help you make sure that the specifications you write for your electrical engineering projects can pass the Huaqianbei test.</p>

<h2 id="trying-to-find-the-shoulders-of-giants">Trying to find the shoulders of giants</h2>

<p>After I got my spec writing assignment from my manager, I decided to start by finding examples of specifications to read. I read a number of internal Surface specifications. While those specs were overall very well written, and immensely helpful, I still wanted to read specs written by other companies. I am always mindful about not being trapped in a group-think situation, and I wanted to see what else was out there.</p>

<p>This is where I went off searching for specifications that were in the public domain. I was surprised by how hard this process was. Where were the giants, on whose shoulders I could stand on?  Sadly, specifications for most products are kept confidential by the companies that built them and never see the light of the day.</p>

<p>Many specifications and test standards from the U.S Military, DoD and NASA are public, and these can be good resources. I did read some <a href="http://everyspec.com/MIL-STD/MIL-STD-0800-0899/MIL-STD-883K_CHG-3_55826/">MIL-STD‚Äôs</a> during my search. I also looked into <a href="https://www.freecodecamp.org/news/how-to-write-a-good-software-design-document-66fcf019569c/">software design documents</a>, whose examples are quite easy to find online for <a href="https://www.kernel.org/doc/html/latest/">open source software projects</a>. Yet neither of these two kinds of specifications were quite what I was looking for:</p>

<ol>
  <li>
    <p>The system that the specification was written for should be an electrical, or electro-mechanical system. While software design documents are interesting, as an electrical engineer I wanted to see something ‚Ä¶ electrical.</p>
  </li>
  <li>
    <p>I wanted to be reasonably familiar with the system that the spec was written for. The spec should be understandable to me without spending too much effort. The specs for electron tubes do not make for ideal learning material.</p>
  </li>
  <li>
    <p>Bonus points if the spec was written for a product that I used personally.</p>
  </li>
</ol>

<p>I ended up finding something that fit the bill perfectly ‚Äì the 39-year old specification for the original IBM PC!</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image003.jpg" alt="A boy using an IBM PC." class="img-responsive" width="75%" /></p>

<p style="text-align: center;"><em>Figure 3: The IBM PC 5150, released in 1981. Photo by <a href="https://en.wikipedia.org/wiki/IBM_Personal_Computer#/media/File:Bundesarchiv_B_145_Bild-F077948-0006,_Jugend-Computerschule_mit_IBM-PC.jpg">Engelbert Reineke</a></em></p>

<p><br /></p>

<h2 id="the-ibm-pc-spec">The IBM PC spec</h2>

<p>When I say IBM PC specification, I am actually referring to the user manual for the IBM PC, which is as good as a full engineering specification.</p>

<p>The IBM PC was released at dawn of the personal computer age, back when the <a href="https://en.wikipedia.org/wiki/Hacker_culture">hacker culture</a> seeped even into IBM. Computers were seen as highly sophisticated machines, and they came with amazingly detailed manuals compared to what you get when you buy a computer today. It was common to get a schematic for the computer you bought, for example. Apple II‚Äôs schematics could be found in its manual. The IBM PC manual even had the source code for its BIOS. Could you imagine all that today?</p>

<p>IBM in particular had even more reasons to write high quality manuals for their products. Antitrust litigation against IBM in the 1950s resulted in a <a href="https://en.wikipedia.org/wiki/History_of_IBM#1956_Consent_Decree">consent decree</a> in 1956, which forced IBM to license its patents at reasonable royalty rates to anyone. Thus, IBM compatible mainframe hardware begun to pop up in the 1960s and 1970s. Seeing how a commoditized add-on hardware market was actually boosting their mainframe sales, IBM kept to the same playbook with the IBM PC:</p>

<blockquote>
  <p>When <a href="https://en.wikipedia.org/wiki/IBM">IBM</a> <a href="https://en.wikipedia.org/wiki/IBM_Personal_Computer#History">designed the PC architecture</a>, they used off-the-shelf parts instead of custom parts, and they carefully documented the interfaces between the parts in the (revolutionary) <a href="https://www.gwern.net/docs/www/www.pcjs.org/6e3fcbc695f155472cefd4c51e91847ff7b1fb83.html">IBM-PC Technical Reference Manual</a>. Why? So that other manufacturers could join the party. As long as you match the interface, you can be used in PCs. IBM‚Äôs goal was to commoditize the add-in market, which is a complement of the PC market, and they did this quite successfully. Within a short time scrillions of companies sprung up offering memory cards, hard drives, graphics cards, printers, etc. Cheap add-ins meant more demand for PCs. <a href="https://www.gwern.net/Complement#2">[1]</a></p>
</blockquote>

<p>IBM‚Äôs business strategy, combined with the general approach to computer manuals back in 1980s, meant that the IBM PC manual was particularly good. The manual that came with the IBM PC became a gold standard of computer manuals, and <a href="https://www.zdnet.com/article/biggest-20-year-pc-breakthrough-ibms-manual/">years later was celebrated as one of the principal reasons why the IBM PC was such a success</a>.</p>

<p>The IBM PC manual remains surprisingly readable for an electrical engineer today. After all, it is the distant ancestor of the computers most of us use every day. You should take a look at the manual <a href="http://www.minuszerodegrees.net/manuals/IBM_5150_Technical_Reference_6322507_APR84.pdf">yourself</a>.</p>

<p>As I was reading the manual, I was amazed at how this 39-year old document was still a great teaching aid. This is not really surprising when you think about it. We humans learn much better from a shining, real example from the past as opposed to getting showered by a bunch of bullet points and abstract statements about what one ought to be doing.</p>

<p>Let‚Äôs now talk about the six lessons I learned from the IBM PC spec that I believe will help any spec writer to pass the Huaqiangbei Test. They are:</p>

<p style="text-align: center;"><strong>Lesson 1: Write your table of contents carefully.</strong></p>
<p style="text-align: center;"><strong>Lesson 2: Maintain a systems-centric view of your design, at all levels.</strong></p>
<p style="text-align: center;"><strong>Lesson 3: Clearly capture the interfaces within the design.</strong></p>
<p style="text-align: center;"><strong>Lesson 4: Do not mix implementation with specification.</strong></p>
<p style="text-align: center;"><strong>Lesson 5: Follow good electrical specification practices.</strong></p>
<p style="text-align: center;"><strong>Lesson 6: Think of how you can support the reader.</strong></p>

<h2 id="lesson-1-write-your-table-of-contents-carefully">Lesson 1: Write your table of contents carefully.</h2>

<p>The way the table of contents (ToC) is written will bias the reader‚Äôs understanding of the system. It is critical that table of contents is organized in a way that makes sense given how the system works.</p>

<p>When I was writing my specification, I wrote the ToC first before writing anything for the body of the specification. I found the ToC to be the hardest piece of the specification to write. Why? Because the ToC directly captures the writer‚Äôs understanding of how the whole system is composed of parts, and how those parts need to come together to grasp the workings of the whole. Writing the ToC is like writing an outline for your spec.</p>

<p>My spec was about the interaction of two systems, which I will call the Transmitter and the Receiver. The Transmitter provides power to the Receiver, and there is bidirectional data flow between the two. I spent a few days just coming up with the highest level of organization, which would directly determine how I would title my chapters. Should I make the Transmitter device the centerpiece of the discussion, or should I make the Transmitter and Receiver equal citizens? Perhaps, my chapters should be titled Data Transfer and Power Transfer instead of the Transmitter or the Receiver ‚Äì after all, the value this system provides comes from the transfer of energy and data between the two subsystems. I kept having conversations in my head about which approach was right, which was frustrating because I was feeling like I was not making real progress on my writing, but I knew that getting to a ToC that made sense to both me and to the reader was crucial.</p>

<p>In the end, I decided to organize the information in my spec along the lines of Transmitter and the Receiver. The reasons as to why I made this decision is beyond the scope of this article, but I hope I made my point ‚Äì there might be multiple valid ways to structure your table of contents, so you need to be prepared to spend a great deal of time drafting your ToC. After you figure out what your chapters, sections, subsections, and sub-subsections will be, reviewing your ToC by a few trusted colleagues will be immensely helpful.</p>

<p>The ToC can and should get tweaked as you now write the body of your spec, but I found that having a first version of the ToC figured out before diving into the writing process helped me a lot to smash writer‚Äôs block, and make quick progress.</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image004.png" alt="IBM PC Spec - Table of contents." class="img-responsive" width="80%" /></p>

<p style="text-align: center;"><em>Figure 4: Table of contents from the IBM PC specification.</em></p>

<p><br /></p>

<p>The designers of the IBM PC have done a good job setting up their table of contents. They start with a short section called ‚ÄúHardware Overview‚Äù, which is only four pages long. At first, I was puzzled as to why they would make an entire section this short, but I understand this now as a powerful technique. The Hardware Overview section tells the reader what information they need to fully absorb before they can proceed to reading the rest of the specification. The reader mentally comes to a pause when they see that a whole section has ended, which I think would make them reflect and make sure they understood what they just read.</p>

<p>The second section is called ‚ÄúHardware‚Äù. This is a long section with 100+ pages, and it is broken down into subsections based on major hardware components (e.g. system board, keyboard, monitor).</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image005.png" alt="Subsections within the hardware section." class="img-responsive" width="75%" /></p>

<p style="text-align: center;"><em>Figure 5: Subsections within the hardware section.</em></p>

<p><br /></p>

<p>The third section is called ‚ÄúROM and System Usage‚Äù. I like to think of this section as the ‚ÄúSoftware‚Äù section, even though it is not named as such. This section describes low-level software functions such as the BIOS, interrupt vectors, memory maps, and keyboard encodings. We can see that this section is meant for describing the interface between the hardware and software and will primarily be used by the programmers of operating systems.</p>

<p>When specifying a computer, a table of contents that splits the organization into hardware and software makes sense. Could there have been other ways of setting up the table of contents? Maybe. Perhaps the system board could have been a chapter on its own, since it is such an important component, and Section 3 could have been merged with the new System Board section, since BIOS and low level software run on the system board. However, this would mean that OS programmers who want to reference the specification would have to skip over detailed hardware descriptions every time they have to look up software information in the spec. Since computer engineers divide themselves into hardware and software engineers, I think it makes more sense to divide the chapters in the specification in that way too. Thinking about how your spec will be referenced by your audience is an example of the empathy that the writer needs to have towards the reader and make the spec most useful to them ‚Äì an important point we will discuss further in Lesson 6.</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image006.png" alt="Another page from the table of contents." class="img-responsive" width="75%" /></p>

<p style="text-align: center;"><em>Figure 6: Another page from the table of contents.</em></p>

<p><br /></p>

<h3 id="the-preface">The Preface</h3>

<p>Even a short specification should have a preface. The preface goes hand in hand with your table of contents and is an opportunity for the writer to play the role of a wise wizard, introducing the reader to their quest. You state what this document is, who it is intended for, and what the sections and appendices are about.</p>

<p>The IBM PC spec has an excellent preface that succinctly introduces us to the 393-page document in front of us.</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image007.png" alt="A preface" class="img-responsive" width="75%" /></p>

<p style="text-align: center;"><em>Figure 7: A preface is a great way to introduce the reader to their quest in understanding your system.</em></p>

<p><br /></p>

<h2 id="lesson-2-maintain-a-systems-centric-view-of-your-design-at-all-levels">Lesson 2: Maintain a systems-centric view of your design, at all levels</h2>

<p>We actually began discussing Lesson 2 already, when we talked about the difficulty of coming up with chapters, sections, and sub-sections in the table of contents. At the heart of Lesson 2 is the following question: how do you break down the complexity of your design, such that the specification is easy to understand for the reader?</p>

<p>The way human beings make sense of new knowledge is through layers of abstraction. Once those layers are identified, our brains start peeling away, and dividing and conquering the information in front of us. As the writer of the specification, you need to identify these layers of abstraction and communicate them to the reader. This can be a fine line to walk on. At every layer, you want to go into the appropriate level of detail. You do not want to gloss over details and risk being imprecise, yet you need to avoid overwhelming the reader with information that is not needed to achieve the level of understanding needed at that layer. This is what the discipline known as systems engineering is all about.</p>

<p>How did the writers of the IBM PC spec tackle this task? I identified three levels of abstraction (Abstraction Levels 0,1,2) that serve as a good example of the right level of complexity to shoot for at each level.</p>

<p>At Abstraction Level 0, we have the hardware overview given at Section 1. This is where the IBM PC itself is being introduced. We are being walked through the organization of the system, starting from the highest level of division possible, which is the System Unit and the Keyboard (the two visually discernable parts of the computer). We get an overview of various major subsystems, such as the monitor, the system board, and the diskette drive adapter. Notice how any of the numbers given are at the appropriate level you could imagine seeing at a specs sheet in a marketing document - 256kB storage, 160kB diskette drive, 80CPS dot matrix printer, and so on.</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image008.png" alt="Abstraction Level 0" class="img-responsive" width="75%" /></p>

<p style="text-align: center;"><em>Figure 8: Abstraction Level 0, where we get an overview, and marketing-level specifications.</em></p>

<p><br /></p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image009.jpg" alt="Floppy disk" class="img-responsive" width="60%" /></p>

<p style="text-align: center;"><em>Figure 9: A 5 ¬º ‚Äò‚Äô Diskette. Contrary to the popular belief, this is not a 3D printed save icon üòâ Photo by <a href="https://www.flickr.com/photos/22457710@N00/252074409">Theo Curmudgeon</a></em></p>

<p><br /></p>

<p>At Abstraction Level 1, we have the system board, which is a major subsystem with subsystems of its own. This is the level of abstraction where we start to see some real engineering information. We learn about:</p>

<ul>
  <li>
    <p>The construction of the system board PCB (multilayer board with power and ground planes)</p>
  </li>
  <li>
    <p>Functional subsystems of the system board (ROM, R/W, I/O etc.)</p>
  </li>
  <li>
    <p>Type of microprocessor used, its major specifications, and its clock frequency.</p>
  </li>
  <li>
    <p>How the system board interacts with peripherals, and its own subsystems.</p>
  </li>
</ul>

<p>This level of detail corresponds to about as much as a ‚Äúpower user‚Äù would like to know about their computer. The hardware knowledge needs of most software engineers writing programs for the IBM PC would also be satisfied.</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image010.png" alt="Abstraction Level 1" class="img-responsive" width="75%" /></p>

<p style="text-align: center;"><em>Figure 10: Abstraction Level 1, where we start getting real engineering details.</em></p>

<p><br /></p>

<p>To illustrate Abstraction Level 2, I chose the Diskette Drive Adapter, which is a subsystem of the System Board. The level of engineering detail here is enhanced further, and now we are getting nuts-and-bolts electrical engineering information:</p>

<ul>
  <li>
    <p>We learn about the types of floppy disk being used, and the encoding scheme</p>
  </li>
  <li>
    <p>We learn that the capacity of the diskette drive is actually 163840 bytes (remember that at Abstraction Level 0 we were told that it was approximately 160kB!)</p>
  </li>
  <li>
    <p>We learn about how analog phased locked loops are being used for clock and data recovery from the floppy drive data.</p>
  </li>
</ul>

<p>While this lesson in finding the appropriate levels of abstraction and the level of knowledge in them might seem obvious, it was one of the major challenges for me when I was writing my specification. Reviewing your specification with other engineers is key to nailing this lesson. Others with a fresh eye can point out bits of information that you left out, or places where you overshared details.</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image011.png" alt="Abstraction Level 2" class="img-responsive" width="75%" /></p>

<p style="text-align: center;"><em>Figure 11: Abstraction Level 2. Getting even more electrical engineering details now.</em></p>

<p><br /></p>

<p>What other tools does the writer have to make it easier for the reader to divide-and-conquer the complexity in the system?</p>

<h3 id="block-diagrams">Block diagrams</h3>

<p>A system block diagram is a great thing to have in your spec. Long verbal descriptions of what a system is supposed to accomplish can get confusing very quickly, so giving your readers visual directions on how different parts of the system combine and interact with each other is a big help to them.</p>

<p>In the IBM PC block diagram, there is a visual sense of what each block physically looks like, further giving context to the readers. Critical information such as the wattage of the power supply, and the capacity of the memory is captured. The system board is broken into its subsystems, but the details are not overwhelming. We see that there is a ‚Äúkeyboard attachment‚Äù, but the system block diagram does not go into more detail, which is perfectly fine. In general, there is not much text. This is a great Abstraction Level 0 block diagram.</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image012.png" alt="IBM PC block diagram" class="img-responsive" width="80%" /></p>

<p style="text-align: center;"><em>Figure 12: IBM PC‚Äôs block diagram. Easy on the eyes, and easy to understand. This is a good ‚ÄúAbstraction Level 0‚Äù block diagram.</em></p>

<p><br /></p>

<p>The Diskette Drive block diagram below is appropriate for Abstraction Level 2. At Abstraction Level 0, we saw a cartoon circuit board of the diskette drive adapter, and now we see how the floppy controller works. Notice how we see diagrams of various electrical components such as AND gates, inverters, and decoders. This is perfect for an Abstraction Level 2 block diagram. We do not want a full schematic, but by connecting signals with AND gates the writer can express themselves more simply than using long verbal descriptions.</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image013.png" alt="Floppy drive block diagram" class="img-responsive" width="90%" /></p>

<p style="text-align: center;"><em>Figure 13: An ‚Äú Abstraction Level 2‚Äù block diagram for the Diskette Drive.</em></p>

<p><br /></p>

<p>Coming up with quality block diagrams takes time. This effort pays off handsomely, however. The difference that an OK block diagram and a superb block diagram can make on your reader‚Äôs understanding is profound.</p>

<p>While a block diagram is usually a good guide for your readers, it can lead them down a path of confusion if you are not careful. Many block diagrams try to cram too much information ‚Äì a common offense that has especially been made worse with diagrams that were never meant to be printed. The older block diagrams I came across during my research were hand drawn and were always meant to reside on a piece of paper. This guaranteed a certain degree of simplicity. When the writer only ever sees their block diagram on a screen, it becomes easier for them to add more and more text, and ever shrinking graphics. From there it is a slippery slope until you end up with a diagram that your reader must zoom in 400% to have any hope of making sense of it.</p>

<p>The worse offenders of unreadable diagrams are the Chinglish data sheets from no-name Chinese manufacturers:</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image014.png" alt="Ground your pixels" class="img-responsive" width="85%" /></p>

<p style="text-align: center;"><em>Figure 14: ‚ÄúMake sure to connect your pixels to ground‚Äù. <a href="https://hackaday.com/2015/04/12/documenting-poorly-documented-led-strips/#more-152513">[5]</a></em></p>

<p><br /></p>

<p>Sadly, large semiconductor companies are guilty of block diagram pixel art too:</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image015.png" alt="Lattice Semi Datasheet" class="img-responsive" width="80%" /></p>

<p style="text-align: center;"><em>Figure 15: Whoa. There is a lot going on, <a href="https://www.latticesemi.com/-/media/LatticeSemi/Documents/ApplicationNotes/AD/DSPFunctionUsageGuideforICE40Devices.ashx?document_id=50669">let‚Äôs zoom in.</a></em></p>

<p><br /></p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image016.png" alt="Lattice Semi Datasheet, zoomed in and pixelated" class="img-responsive" width="75%" /></p>

<p style="text-align: center;"><em>Figure 16: 16x16 = 32??? <a href="https://twitter.com/oe1cxw/status/1097821398490320896">From Twitter user @oe1cxw</a></em></p>

<p><br /></p>

<p>The block diagram is a map - a way for you to put the reader‚Äôs visual cortex into work so that they understand your system better. So, make it a good map.</p>

<h2 id="lesson-3-clearly-capture-the-interfaces-within-the-design">Lesson 3: Clearly capture the interfaces within the design.</h2>

<p>It is so important to describe, in detail, the interfaces between the subsystems of your design. These interfaces are prime breeding grounds for bugs, and your efforts to painstakingly specify the interactions between your subsystems will allow you to catch bugs before they have a chance to appear.</p>

<p>The writers of the IBM PC spec went to great lengths to capture their interfaces. Figure 17 shows how data flows within the system board. Even though making a full data flow diagram could be hard for complicated modern designs, at the very least you should make power trees and clock trees. The power tree shows how power flows in your design, and the clock tree shows where your subsystems get their clocks from.</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image017.png" alt="IBM PC motherboard data flow" class="img-responsive" width="80%" /></p>

<p style="text-align: center;"><em>Figure 17: Capturing how data flows within the system board.</em></p>

<p><br /></p>

<p>Figure 18 is a good example on how to describe signals at an interface. This is for the parallel port between the system board and the dot matrix printer. We see signal pin numbers, signal labels (labeling active low signals also with a line over the text), their direction, and their description. While not shown in Figure 18, it is described earlier in the text that these signals use TTL logic levels.</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image018.png" alt="Parallel port signals description" class="img-responsive" width="80%" /></p>

<p style="text-align: center;"><em>Figure 18: Parallel port signals going to the dot matrix printer are described.</em></p>

<p><br /></p>

<p>Figure 19 is cool, because the Pin 1 location of the Diskette Drive Adapter is labeled by referencing to a mechanical diagram. Ask any experienced electrical engineer and they will admit to having flipped Pin 1‚Äôs on their flex cables at some point. I know I have. This sort of mistake can be embarrassing, so preparing drawings with pin labels will help you check your work.</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image019.png" alt="Floppy disk Pin 1" class="img-responsive" width="70%" /></p>

<p style="text-align: center;"><em>Figure 19: Illustrating your mechanical interfaces will help catch Pin 1 bugs!</em></p>

<p><br /></p>

<h2 id="lesson-4-do-not-mix-implementation-with-specification">Lesson 4: Do not mix implementation with specification</h2>

<p>Now is a good time to meditate on what exactly it is that we are trying to accomplish when we write a specification.</p>

<p>A specification is about the architecture of an engineering system. It tells us how an overarching system emerges from numerous subsystems. For a specification to be effective, it needs to be agnostic of the implementation. This quote from the famous book <em>The Mythical Man Month</em> explains beautifully what we mean by the distinctness of the architecture, and the implementation (emphasis is mine):</p>

<blockquote>
  <p>The separation of architectural effort from implementation is a very powerful way of getting conceptual integrity on very large projects [‚Ä¶] By the architecture of a system, I mean the complete and detailed specification of the user interface. For a computer this is the programming manual. For a compiler it is the language manual. For a control program it is the manuals for the language or languages used to invoke its functions. For the entire system it is the union of the manuals the user must consult to do his entire job.
<strong>The architect of a system, like the architect of a building, is the user‚Äôs agent.</strong> It is his job to bring professional and technical knowledge to bear in the unalloyed interest of the user, as opposed to the interests of the salesman, the fabricator, etc.
Architecture must be carefully distinguished from implementation. As Blaauw has said, ‚ÄúWhere architecture tells what happens, implementation tells how it is made to happen.‚Äù He gives as a simple example a clock, whose architecture consists of the face, the hands, and the winding knob. When a child has learned this architecture, he can tell time as easily from a wristwatch as from a church tower. The implementation, however, and its realization, describe what goes on inside the case‚Äîpowering by any of many mechanisms and accuracy control by any of many. [2]</p>
</blockquote>

<p>Users do not care about how features are implemented in your system. What they care is what your system can accomplish for them, which is what the specification is about. When you are writing your spec, you should not forget that you are the user‚Äôs agent. When I was writing my spec, I included a section that gave the user‚Äôs story of how they would interact with the system we were specifying.</p>

<p>Divorcing implementation and separation is yet another area where the IBM PC spec shines. The only place where you will find detailed schematics is the appendix. They stuck to using off-the-shelf parts as much as possible (e.g 74LS244 buffers), which helps to split specification and implementation. A common way for implementation to sneak into the specification is the usage of poorly specified, proprietary parts. These parts become black holes to the readers, which eventually force them to make frustrated calls to Field Applications Engineers supporting those parts, reducing the value of the spec document in the process.</p>

<h2 id="lesson-5-follow-good-electrical-specification-practices">Lesson 5: Follow good electrical specification practices</h2>

<p>In the first three lessons, we already touched upon some good examples of how to specify electrical parameters. I praised the interface description in Figure 18, and the electrical block diagram in Figure 13. Here are some more good examples from the IBM PC spec.</p>

<h3 id="specify-your-off-the-shelf-components">Specify your off the shelf components</h3>

<p>Off-the-shelf (OTS) components are not created equal. Capture your assumptions in the performance of the OTS components your system is using.</p>

<p>By not capturing these assumptions, you are exposing your spec document to any changes the manufacturer might make to the specification of the part. Even worse, your system might be relying on a property of the OTS component that was not called out explicitly on the spec, and this property might end up changing as a result of a tweak the vendor does to their manufacturing process.</p>

<p>Neglecting this step is a recipe for weird bugs that appear seemingly randomly during your product‚Äôs lifetime. Bugs that make poor engineers scratch their heads and yell at their oscilloscopes ‚Äì ‚ÄúI don‚Äôt understand, we are following the spec!!‚Äù</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image020.png" alt="Specifying Floppy disks" class="img-responsive" width="80%" /></p>

<p style="text-align: center;"><em>Figure 20: IBM PC designers meticulously specified their 5 ¬º‚Äô‚Äô diskettes.</em></p>

<p><br /></p>

<h3 id="make-good-electrical-block-diagrams">Make good electrical block diagrams</h3>

<p>We already saw an electrical block diagram example in Figure 10. Here is another in Figure 21. Notice how this diagram contains more electrical details than a typical block diagram, but it is not quite a schematic, and it does not need to be. Electrical components such as D-latches and the 74LS322 shift register are represented as functional blocks only. After understanding this block diagram, the reader will have a much easier time reading the schematic for the keyboard interface.</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image021.png" alt="Another EE block diagram example" class="img-responsive" width="80%" /></p>

<p style="text-align: center;"><em>Figure 21: Another electrical block diagram example.</em></p>

<p><br /></p>

<h3 id="include-simplied-schematics-where-needed">Include simplied schematics where needed</h3>

<p>While you want to avoid full-blown, complex schematics in your specifications, using simple schematics made out of basic components is OK. In the joystick example above, drawing potentiometers explains to the reader how the position detection is done. It would be silly to turn a humble potentiometer into a block with three terminals and then proceed to explain its function.</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image022.png" alt="Joystick blog diagram" class="img-responsive" width="90%" /></p>

<p style="text-align: center;"><em>Figure 22: A simple joystick schematic. This is appropriate for a spec.</em></p>

<p><br /></p>

<h3 id="include-tolerances-for-the-parameters-you-specify">Include tolerances for the parameters you specify</h3>

<p>State tolerances for any of the parameters you give in your document, just like in Figure 23 below.</p>

<p>A common mistake here is ambiguity with regard to ‚Äúnominal‚Äù specs. Even datasheets from large semiconductor companies can sometime be guilty of this. How was the nominal measured? What operating temperature is being assumed at nominal conditions?</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image023.png" alt="Parameter tolerances" class="img-responsive" width="80%" /></p>

<p style="text-align: center;"><em>Figure 23: Specify tolerances for your parameters.</em></p>

<p><br /></p>

<h2 id="lesson-6-think-of-how-you-can-support-the-reader">Lesson 6: Think of how you can support the reader</h2>

<p>The reason you are going through all this effort of writing a specification document is the reader. Whatever you do, it is important that you try to make the reader‚Äôs job as easy as possible. This will determine whether you are successful or not as the writer of the specification document. A common complaint I see about writing specifications is ‚Äúwell nobody is going to read it anyway‚Äù. This attitude will become a self-fulfilling prophecy for any piece of writing, because the writer will not put in their best work, and they will not have empathy with the reader.</p>

<p>To give your spec a chance to be read widely, you need to ensure the you have grammar and spelling nailed, and that the document looks good. You do not need to spend five hours trying to find the perfect LaTeX package (cough cough) but do make the document clean and approachable.</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image024.png" alt="Spec horror" class="img-responsive" width="90%" /></p>

<p style="text-align: center;"><em>Figure 24: Please promise me you won‚Äôt do this. <a href="https://datasheet.datasheetarchive.com/originals/crawler/antcom.com/9ec044cf132c90fd9bd7bbcf3b40c318.pdf">[3]</a></em></p>

<p><br /></p>

<p>From my own experience as a reader of specs, adding the sections I listed below will greatly increase the value of your specification document.</p>

<h3 id="the-appendix">The Appendix</h3>

<p>The appendices of your specification are a chance for you to present information that while not a part of the specification itself, would be useful to the reader. For the IBM PC spec, the appendices included the source code of the BIOS, the Intel 8086 assembly instruction set and electrical schematics.</p>

<p>Some good ideas for appendices:</p>

<ul>
  <li>
    <p>Implementation information, such as electrical schematics or reference designs.</p>
  </li>
  <li>
    <p>Quick reference information. An example of this is how the IBM PC spec included the assembly instruction set for the Intel 8086.</p>
  </li>
  <li>
    <p>Any checklists, quick start guides, or recommended design workflows for designers that would be working with your system.</p>
  </li>
</ul>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image025.png" alt="IBM PC spec appendix" class="img-responsive" width="80%" /></p>

<p style="text-align: center;"><em>Figure 25: Appendices included with the IBM PC spec.</em></p>

<p><br /></p>

<h3 id="the-glossary">The Glossary</h3>

<p>The glossary makes sure that the reader and the writer are on the same page when it comes to the terms used in the document.</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image026.png" alt="IBM PC spec glossary" class="img-responsive" width="80%" /></p>

<p style="text-align: center;"><em>Figure 26: Glossary from the IBM PC spec.</em></p>

<p><br /></p>

<h3 id="the-bibliography">The Bibliography</h3>

<p>Not much to say here. Just like your college papers benefited from bibliographies, your specs could use them too. If you are linking to websites in your spec, I would suggest saving an offline copy of the website you are linking to, because it is only a matter of time before link rot happens.</p>

<h3 id="revision-tracker">Revision Tracker</h3>

<p>Continuously track any changes you make to the document to make sure there are no issues down the line in the field with conflicting information from different document versions.</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image027.png" alt="International Docking Standard, revision tracking." class="img-responsive" width="80%" /></p>

<p style="text-align: center;"><em>Figure 27: Revision tracking from the International Docking Adapter specification. <a href="https://www.internationaldockingstandard.com/download/IDSS_IDD_Revision_E_TAGGED.pdf">[4]</a></em></p>

<p><br /></p>

<h3 id="list-of-figures-and-tables">List of Figures and Tables</h3>

<p>List of Figures and List of Tables are great for easy reference.</p>

<p><br /></p>

<p class="center"><img src="/images/ee-specs/image028.png" alt="IBM PC Spec, list of figures" class="img-responsive" width="80%" /></p>

<p style="text-align: center;"><em>Figure 28: List of figures from the IBM PC spec.</em></p>

<p><br /></p>

<h2 id="wrapping-up-and-further-resources">Wrapping up, and further resources</h2>

<p>Let us recap the lessons I learned from the IBM PC specification:</p>

<p style="text-align: center;"><strong>Lesson 1: Write your table of contents carefully.</strong></p>
<p style="text-align: center;"><strong>Lesson 2: Maintain a systems-centric view of your design, at all levels.</strong></p>
<p style="text-align: center;"><strong>Lesson 3: Clearly capture the interfaces within the design.</strong></p>
<p style="text-align: center;"><strong>Lesson 4: Do not mix implementation with specification.</strong></p>
<p style="text-align: center;"><strong>Lesson 5: Follow good electrical specification practices.</strong></p>
<p style="text-align: center;"><strong>Lesson 6: Think of how you can support the reader.</strong></p>

<p>I hope they will be useful in nailing down the Huaqiangbei Test. Here is a list of further resources to check out.</p>

<h3 id="linear-technology-datasheets">Linear Technology datasheets</h3>

<p>I spent the summer of 2015 interning at Linear Technology (before it was acquired by Analog Devices) and can attest that LT‚Äôs designers take great pride in their datasheets. During my internship, my mentor was in the process of writing a datasheet, and I saw firsthand how much effort and care he was putting into his draft. LT and AD datasheets are hailed as some of the best in the industry for a good reason. EEs always say that they would love to use LT parts just for the sake of the datasheets, if BOM costs were no object. üòä</p>

<p>While we are talking about Linear Technology, here is another good <a href="https://www.analog.com/en/technical-articles/introduction-of-ltpowerplanner-program-a-system-level-power-architecture-design-tool.html">power tree</a> example from them.</p>

<h3 id="industry-specs">Industry specs</h3>

<p>Many of the industry standard EE specifications are public. Studying industry specs also helps with interviewing, since interviewers love to ask about how industry standard buses work (e.g I2C and SPI).</p>

<ul>
  <li>
    <p><a href="https://www.nxp.com/docs/en/user-guide/UM10204.pdf">I2C bus specification from NXP</a></p>
  </li>
  <li>
    <p><a href="http://www.ti.com/lit/ug/sprugp2a/sprugp2a.pdf?ts=1588647347738">SPI bus specification from TI</a></p>
  </li>
  <li>
    <p><a href="https://www.wirelesspowerconsortium.com/knowledge-base/specifications/download-the-qi-specifications.html">Qi wireless charging protocol specification from the Qi consortium</a></p>
  </li>
</ul>

<h3 id="nasa-specs">NASA specs</h3>

<p>NASA and many of the other organizations in the aerospace industry publish their specs, which can make for great learning material. I especially like the <a href="https://www.internationaldockingstandard.com/download/IDSS_IDD_Revision_E_TAGGED.pdf">International Docking Adapter specification</a>, which specifies how spacecraft need to have their docking interface built in order to attach to the International Space Station. It is a great example of how to specify interfaces between systems.</p>

<h2 id="article-series">Article series</h2>

<p>This was the first installment in my article series on things I did not learn in electrical engineering school. There will be more articles to come. The next one will either be about flexible circuit board basics, or tips for interviewing. Stay tuned!</p>

<h2 id="references">References</h2>

<p>[1] <a href="https://www.gwern.net/Complement#2">Laws of Tech : Commoditize Your Complement</a></p>

<p id="mmm">[2] <a href="https://www.amazon.com/Mythical-Man-Month-Software-Engineering-Anniversary/dp/0201835959/ref=sr_1_1?crid=1KRUN0TO6BQCM&amp;dchild=1&amp;keywords=the+mythical+man+month&amp;qid=1591771115&amp;sprefix=the+mythical+ma%2Caps%2C216&amp;sr=8-1">Brooks, Frederick P.. The Mythical Man-Month: Essays on Software Engineering, Anniversary Edition. United States, Pearson Education, 1995</a>.</p>

<p>[3] <a href="https://datasheet.datasheetarchive.com/originals/crawler/antcom.com/9ec044cf132c90fd9bd7bbcf3b40c318.pdf">Antcom L1/L2 GPS Antennas</a>.</p>

<p>[4] <a href="https://www.internationaldockingstandard.com/download/IDSS_IDD_Revision_E_TAGGED.pdf">International Docking Standard (IDSS), Interface Definition Document (IDD), Revision E,  2016</a>.</p>

<p>[5] <a href="https://hackaday.com/2015/04/12/documenting-poorly-documented-led-strips/#more-152513">Documenting Poorly Documented LED Strips</a></p>

<p>[6] <a href="https://www.amazon.com/The-One-Device-Brian-Merchant-audiobook/dp/B072QDKDRR/ref=sr_1_1?dchild=1&amp;keywords=the+one+device&amp;qid=1591771164&amp;sr=8-1">Merchant, Brian. The One Device: The Secret History of the iPhone. United States, Little, Brown, 2017</a>.</p>

<hr />
<hr />
:ET